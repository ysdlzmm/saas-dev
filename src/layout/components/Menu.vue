<script setup lang="ts">
import { computed, h } from 'vue';
import { useRouter, useRoute } from 'vue-router';
import { NMenu } from 'naive-ui';
import type { MenuOption } from 'naive-ui';

const router = useRouter();
const route = useRoute();

const { collapsed } = defineProps<{
  collapsed?: boolean
}>()

const renderIcon = (icon: string) => {
    return () => h('span', { class: 'text-xl' }, icon);
};

const menuOptions: MenuOption[] = [
    {
        label: 'é¦–é¡µ',
        key: '/',
        icon: renderIcon('ðŸ '),
    },
    {
        label: 'ä»»åŠ¡çœ‹æ¿',
        key: '/tasks',
        icon: renderIcon('ðŸ“‹'),
    },
    {
        label: 'ç³»ç»Ÿè®¾ç½®',
        key: '/settings',
        icon: renderIcon('âš™ï¸'),
    },
];

const activeKey = computed(() => route.path);

const handleMenuClick = (key: string) => {
    router.push(key);
};

</script>

<template>
    <NMenu
        :collapsed="collapsed"
        :collapsed-width="64"
        :collapsed-icon-size="22"
        :options="menuOptions"
        :value="activeKey"
        @update:value="handleMenuClick"
        class="mt-4"
    />
</template>
